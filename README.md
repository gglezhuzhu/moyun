# å¢¨éŸµè¯»ä¹¦å¹³å°

ä¸€ä¸ªåŸºäºSpring Bootçš„ç»¼åˆæ€§è¯»ä¹¦ç¤¾äº¤å¹³å°ï¼Œé‡‡ç”¨ä¸¥æ ¼çš„è½¯ä»¶å·¥ç¨‹æ¶æ„è®¾è®¡ï¼ˆè¾¹ç•Œç±»ã€æ§åˆ¶ç±»ã€å®ä½“ç±»ã€è¾…åŠ©ç±»ï¼‰ï¼Œæ”¯æŒå¤šè§’è‰²ç”¨æˆ·ä½“ç³»å’Œå®Œæ•´çš„è¯»ä¹¦ç¤¾äº¤åŠŸèƒ½ã€‚

## ä¸€ã€é¡¹ç›®ç‰¹æ€§

### 1.1 ç”¨æˆ·è§’è‰²ä½“ç³»
- **æ™®é€šç”¨æˆ·ï¼ˆUserï¼‰** - åŸºç¡€åŠŸèƒ½ï¼šç®¡ç†ä¹¦åº“ã€ä¹¦è¯„ã€å‚ä¸è®¨è®ºã€å†™æ—¥å¿—
- **å­¦ç”Ÿï¼ˆStudentï¼‰** - ç»§æ‰¿Userï¼šå¯é€‰æ‹©å¯¼å¸ˆã€å‘è€å¸ˆæé—®ã€æŸ¥çœ‹æ¨èå›¾ä¹¦
- **å¯¼å¸ˆï¼ˆTeacherï¼‰** - ç»§æ‰¿Userï¼šå¯æ¨èå›¾ä¹¦ã€åˆ›å»ºç®¡ç†åœˆå­ã€å›ç­”å­¦ç”Ÿé—®é¢˜ã€ç®¡ç†å­¦ç”Ÿ
- **ç®¡ç†å‘˜ï¼ˆAdminï¼‰** - ç»§æ‰¿Userï¼šæ‹¥æœ‰å†…å®¹åˆ é™¤å’Œç”¨æˆ·ç®¡ç†æƒé™

### 1.2 æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
-  **ç”¨æˆ·ç®¡ç†** - æ³¨å†Œã€ç™»å½•ã€ä¸ªäººä¿¡æ¯ç®¡ç†ã€å¯†ç é‡ç½®
-  **å›¾ä¹¦ç®¡ç†** - å›¾ä¹¦æ·»åŠ ã€ä¿®æ”¹ã€æŸ¥çœ‹ã€æœç´¢ã€åˆ†ç±»ç®¡ç†
-  **ä¹¦è¯„ç³»ç»Ÿ** - å†™ä¹¦è¯„ã€è¯„è®ºä¹¦è¯„ã€ç‚¹èµåŠŸèƒ½
-  **è®¨è®ºåŒº** - å‘èµ·è®¨è®ºã€å›å¤è®¨è®ºã€å¸ˆç”Ÿé—®ç­”
-  **æ—¥å¿—ç®¡ç†** - è¯»ä¹¦æ—¥å¿—ã€éšç§è®¾ç½®ã€è¯„è®ºåŠŸèƒ½
-  **åœˆå­åŠŸèƒ½** - å¯¼å¸ˆåˆ›å»ºå’Œç®¡ç†åœˆå­ã€æˆå‘˜ç®¡ç†
-  **å¸ˆç”Ÿå…³ç³»** - å­¦ç”Ÿç”³è¯·å¯¼å¸ˆã€å¯¼å¸ˆå®¡æ‰¹ç®¡ç†
-  **å›¾ä¹¦æ¨è** - å¯¼å¸ˆå‘å­¦ç”Ÿ/åœˆå­æ¨èå›¾ä¹¦
-  **ç®¡ç†åŠŸèƒ½** - ç®¡ç†å‘˜åˆ é™¤å†…å®¹ã€ç”¨æˆ·èº«ä»½ç®¡ç†

## ğŸ—äºŒã€é¡¹ç›®æ¶æ„

### 2.1 æ¶æ„è®¾è®¡

```
src/main/java/com/moyun/reading/
â”œâ”€â”€ boundary/              # è¾¹ç•Œç±» - ç”¨æˆ·ç•Œé¢å±‚
â”‚   â”œâ”€â”€ controller/        # MVCæ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ UserController.java
â”‚   â”‚   â”œâ”€â”€ BookController.java
â”‚   â”‚   â”œâ”€â”€ ReviewController.java
â”‚   â”‚   â”œâ”€â”€ DiscussionController.java
â”‚   â”‚   â”œâ”€â”€ DiaryController.java
â”‚   â”‚   â”œâ”€â”€ CircleController.java
â”‚   â”‚   â”œâ”€â”€ StudentController.java
â”‚   â”‚   â”œâ”€â”€ TeacherController.java
â”‚   â”‚   â””â”€â”€ AdminController.java
â”‚   â””â”€â”€ dto/              # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚       â””â”€â”€ UserRegistrationDto.java
â”œâ”€â”€ control/              # æ§åˆ¶ç±» - ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â””â”€â”€ service/          # ä¸šåŠ¡æœåŠ¡
â”‚       â”œâ”€â”€ UserService.java
â”‚       â”œâ”€â”€ BookService.java
â”‚       â”œâ”€â”€ ReviewService.java
â”‚       â”œâ”€â”€ DiscussionService.java
â”‚       â”œâ”€â”€ ReadingDiaryService.java
â”‚       â”œâ”€â”€ CircleService.java
â”‚       â”œâ”€â”€ StudentService.java
â”‚       â””â”€â”€ TeacherService.java
â”œâ”€â”€ entity/               # å®ä½“ç±» - æ•°æ®æ¨¡å‹å±‚
â”‚   â”œâ”€â”€ base/             # åŸºç¡€å®ä½“
â”‚   â”‚   â”œâ”€â”€ BaseEntity.java
â”‚   â”‚   â””â”€â”€ User.java
â”‚   â”œâ”€â”€ user/             # ç”¨æˆ·ç›¸å…³å®ä½“
â”‚   â”‚   â”œâ”€â”€ Student.java
â”‚   â”‚   â”œâ”€â”€ Teacher.java
â”‚   â”‚   â””â”€â”€ Admin.java
â”‚   â”œâ”€â”€ book/             # å›¾ä¹¦ç›¸å…³å®ä½“
â”‚   â”‚   â”œâ”€â”€ Book.java
â”‚   â”‚   â””â”€â”€ BookCategory.java
â”‚   â”œâ”€â”€ review/           # ä¹¦è¯„ç›¸å…³å®ä½“
â”‚   â”‚   â”œâ”€â”€ Review.java
â”‚   â”‚   â”œâ”€â”€ ReviewComment.java
â”‚   â”‚   â””â”€â”€ ReviewLike.java
â”‚   â”œâ”€â”€ discussion/       # è®¨è®ºç›¸å…³å®ä½“
â”‚   â”‚   â”œâ”€â”€ Discussion.java
â”‚   â”‚   â””â”€â”€ DiscussionReply.java
â”‚   â”œâ”€â”€ diary/            # æ—¥å¿—ç›¸å…³å®ä½“
â”‚   â”‚   â”œâ”€â”€ ReadingDiary.java
â”‚   â”‚   â””â”€â”€ DiaryComment.java
â”‚   â”œâ”€â”€ circle/           # åœˆå­ç›¸å…³å®ä½“
â”‚   â”‚   â”œâ”€â”€ Circle.java
â”‚   â”‚   â””â”€â”€ CircleMember.java
â”‚   â””â”€â”€ recommendation/   # æ¨èç›¸å…³å®ä½“
â”‚       â””â”€â”€ BookRecommendation.java
â”œâ”€â”€ utility/              # è¾…åŠ©ç±» - å·¥å…·ç±»å±‚
â”‚   â””â”€â”€ security/         # å®‰å…¨å·¥å…·
â”‚       â”œâ”€â”€ PasswordUtil.java
â”‚       â””â”€â”€ SecurityUtil.java
â”œâ”€â”€ repository/           # æ•°æ®è®¿é—®å±‚
â”œâ”€â”€ config/               # é…ç½®ç±»
â”‚   â”œâ”€â”€ SecurityConfig.java
â”‚   â”œâ”€â”€ DatabaseInitializer.java
â”‚   â””â”€â”€ DataInitializer.java
â””â”€â”€ dto/                  # æ•°æ®ä¼ è¾“å¯¹è±¡
    â””â”€â”€ UserProfileUpdateDto.java
```

### 2.2 ç”¨æˆ·ç»§æ‰¿å…³ç³»
```
BaseEntity (åŸºç¡€å®ä½“)
â””â”€â”€ User (æ™®é€šç”¨æˆ·)
    â”œâ”€â”€ Student (å­¦ç”Ÿ) extends User
    â”œâ”€â”€ Teacher (å¯¼å¸ˆ) extends User  
    â””â”€â”€ Admin (ç®¡ç†å‘˜) extends User
```

## ä¸‰ã€é¡¹ç›®ä½¿ç”¨

### ç¯å¢ƒè¦æ±‚
- Java 17+
- Maven 3.6+
- MySQL 8.0+ (ç”Ÿäº§ç¯å¢ƒ)

### 3.1 å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/gglezhuzhu/moyun
cd software_moyun
```

### 3.2 é…ç½®æ•°æ®åº“
é¡¹ç›®ä½¿ç”¨äº‘ç«¯æ•°æ®åº“TiDB,é¡¹ç›®æ‰€éœ€æ•°æ®åº“éƒ¨åˆ†éƒ½å·²å®Œæˆè¿æ¥ï¼Œå¯è¯»å†™ã€‚

### 3.3 è¿è¡Œé¡¹ç›®
```bash
#ä½¿ç”¨Mavenï¼ˆä¸»ç›®å½•ä¸‹ï¼‰
./mvnw clean compile 
./mvnw spring-boot:run
```

### 3.4 è®¿é—®åº”ç”¨
- åº”ç”¨åœ°å€ï¼šhttp://localhost:8080

### 3.5 æµ‹è¯•è´¦å·
ç³»ç»Ÿåœ¨äº‘ç«¯æ•°æ®åº“å·²ç»æœ‰ä»¥ä¸‹è´¦å·ï¼š

| è§’è‰² | ç”¨æˆ·å | å¯†ç  | è¯´æ˜ |
|------|--------|------|------|
| ç®¡ç†å‘˜ | admin | 123456 | æ‹¥æœ‰æ‰€æœ‰æƒé™ |
| å¯¼å¸ˆ | teacher | 123456 | å¯ç®¡ç†åœˆå­å’Œå­¦ç”Ÿ |
| å­¦ç”Ÿ | ozx | 123456 | å·²æœ‰å¯¼å¸ˆ(teacher) |
| æ™®é€šç”¨æˆ· | normal | 123456 | åŸºç¡€åŠŸèƒ½ |

## å››ã€åŠŸèƒ½æ¼”ç¤º

### 4.1 æ™®é€šç”¨æˆ·åŠŸèƒ½
1. **ç”¨æˆ·ä¸­å¿ƒ** - `/user/profile` - æŸ¥çœ‹å’Œç¼–è¾‘ä¸ªäººä¿¡æ¯
2. **å›¾ä¹¦ç®¡ç†** - `/books` - æµè§ˆã€æœç´¢ã€æ·»åŠ å›¾ä¹¦
3. **ä¹¦è¯„åŠŸèƒ½** - `/reviews` - å†™ä¹¦è¯„ã€è¯„è®ºã€ç‚¹èµ
4. **è®¨è®ºåŒº** - `/discussions` - å‚ä¸å…¬å…±è®¨è®º
5. **è¯»ä¹¦æ—¥å¿—** - `/diary` - è®°å½•è¯»ä¹¦å¿ƒå¾—

### 4.2 å­¦ç”Ÿç‰¹æœ‰åŠŸèƒ½
1. **é€‰æ‹©å¯¼å¸ˆ** - `/student/select-teacher` - ç”³è¯·æˆä¸ºæŸä½å¯¼å¸ˆçš„å­¦ç”Ÿ
2. **æˆ‘çš„ç”³è¯·** - `/student/applications` - æŸ¥çœ‹ç”³è¯·çŠ¶æ€
3. **å‘è€å¸ˆæé—®** - `/discussions/create?type=QUESTION` - ç§å¯†é—®ç­”
 
###4.3  å¯¼å¸ˆç‰¹æœ‰åŠŸèƒ½
1. **å­¦ç”Ÿç®¡ç†** - `/teacher/applications` - å®¡æ‰¹å­¦ç”Ÿç”³è¯·
2. **åœˆå­ç®¡ç†** - `/teacher/circles` - åˆ›å»ºå’Œç®¡ç†è¯»ä¹¦åœˆå­
3. **å›¾ä¹¦æ¨è** - `/teacher/create-recommendation` - å‘å­¦ç”Ÿæ¨èå›¾ä¹¦
4. **å›ç­”é—®é¢˜** - `/teacher/questions` - å›ç­”å­¦ç”Ÿæé—®

### 4.4 ç®¡ç†å‘˜åŠŸèƒ½
1. **ç”¨æˆ·ç®¡ç†** - `/admin/users` - ç®¡ç†ç”¨æˆ·è§’è‰²å’ŒçŠ¶æ€
2. **å†…å®¹ç®¡ç†** - `/admin/books`, `/admin/reviews`, `/admin/discussions`, `/admin/diaries`
3. **æ•°æ®ç»Ÿè®¡** - `/admin/dashboard` - æŸ¥çœ‹å¹³å°ç»Ÿè®¡æ•°æ®

## äº”ã€å¼€å‘æŒ‡å—

### 5.1 æ·»åŠ æ–°åŠŸèƒ½æµç¨‹
1. **åˆ›å»ºå®ä½“ç±»** - åœ¨`entity`å¯¹åº”åŒ…ä¸‹åˆ›å»ºï¼Œç»§æ‰¿`BaseEntity`
2. **åˆ›å»ºRepository** - åœ¨`repository`åŒ…ä¸‹åˆ›å»ºJPAæ¥å£
3. **åˆ›å»ºService** - åœ¨`control/service`åŒ…ä¸‹å®ç°ä¸šåŠ¡é€»è¾‘
4. **åˆ›å»ºController** - åœ¨`boundary/controller`åŒ…ä¸‹å¤„ç†è¯·æ±‚
5. **åˆ›å»ºé¡µé¢æ¨¡æ¿** - åœ¨`src/main/resources/templates`ä¸‹åˆ›å»ºThymeleafæ¨¡æ¿

### 5.2 æ•°æ®åº“è®¾è®¡åŸåˆ™
- ä½¿ç”¨JPAè‡ªåŠ¨å»ºè¡¨ï¼ˆ`spring.jpa.hibernate.ddl-auto=update`ï¼‰
- ç”¨æˆ·è¡¨é‡‡ç”¨å•è¡¨ç»§æ‰¿ç­–ç•¥ï¼ˆDTYPEå­—æ®µåŒºåˆ†ç±»å‹ï¼‰
- æ‰€æœ‰è¡¨åŒ…å«`created_at`ã€`updated_at`ã€`deleted`å­—æ®µ
- ä½¿ç”¨å¤–é”®çº¦æŸä¿è¯æ•°æ®å®Œæ•´æ€§

## å…­ã€APIæ–‡æ¡£

ä¸»è¦é¡µé¢è·¯ç”±ï¼š

| åŠŸèƒ½æ¨¡å— | è·¯ç”± | è¯´æ˜ |
|----------|------|------|
| é¦–é¡µ | `/` | å±•ç¤ºæœ€æ–°å›¾ä¹¦å’Œä¹¦è¯„ |
| ç”¨æˆ·æ³¨å†Œ | `/user/register` | ç”¨æˆ·æ³¨å†Œé¡µé¢ |
| ç”¨æˆ·ç™»å½• | `/user/login` | ç”¨æˆ·ç™»å½•é¡µé¢ |
| ä¸ªäººä¸­å¿ƒ | `/user/profile` | æŸ¥çœ‹ä¸ªäººä¿¡æ¯ |
| å›¾ä¹¦åˆ—è¡¨ | `/books` | æµè§ˆæ‰€æœ‰å›¾ä¹¦ |
| å›¾ä¹¦è¯¦æƒ… | `/books/{id}` | æŸ¥çœ‹å›¾ä¹¦è¯¦æƒ… |
| ä¹¦è¯„åˆ—è¡¨ | `/reviews` | æµè§ˆæ‰€æœ‰ä¹¦è¯„ |
| ä¹¦è¯„è¯¦æƒ… | `/reviews/{id}` | æŸ¥çœ‹ä¹¦è¯„è¯¦æƒ… |
| è®¨è®ºåˆ—è¡¨ | `/discussions` | æµè§ˆè®¨è®º |
| æ—¥å¿—åˆ—è¡¨ | `/diary` | æŸ¥çœ‹å…¬å¼€æ—¥å¿— |
| åœˆå­åˆ—è¡¨ | `/circles` | æµè§ˆåœˆå­ |

## ä¸ƒã€è”ç³»æ–¹å¼

- é¡¹ç›®ç»´æŠ¤ï¼šgglezhuzhu
- é¡¹ç›®åœ°å€ï¼š[GitHubä»“åº“](https://github.com/gglezhuzhu/moyun)
- é—®é¢˜åé¦ˆï¼š[Issues](https://github.com/gglezhuzhu/moyun/issues)



**å¢¨éŸµè¯»ä¹¦å¹³å°** - è®©é˜…è¯»æ›´æœ‰æ¸©åº¦ï¼Œè®©çŸ¥è¯†æ›´æœ‰æ·±åº¦ã€‚
